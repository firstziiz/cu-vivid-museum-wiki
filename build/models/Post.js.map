{"version":3,"sources":["../../src/models/Post.js"],"names":["keystone","require","Types","Field","Post","List","map","name","autokey","path","from","unique","add","title","type","String","required","state","Select","options","default","index","author","Relationship","ref","publishedDate","Date","dependsOn","image","CloudinaryImage","content","brief","Html","wysiwyg","height","extended","categories","many","schema","virtual","get","defaultColumns","register"],"mappings":";;AAAA,IAAIA,WAAWC,QAAQ,UAAR,CAAf;AACA,IAAIC,QAAQF,SAASG,KAAT,CAAeD,KAA3B;;AAEA;;;;;AAKA,IAAIE,OAAO,IAAIJ,SAASK,IAAb,CAAkB,MAAlB,EAA0B;AACpCC,MAAK,EAAEC,MAAM,OAAR,EAD+B;AAEpCC,UAAS,EAAEC,MAAM,MAAR,EAAgBC,MAAM,OAAtB,EAA+BC,QAAQ,IAAvC;AAF2B,CAA1B,CAAX;;AAKAP,KAAKQ,GAAL,CAAS;AACRC,QAAO,EAAEC,MAAMC,MAAR,EAAgBC,UAAU,IAA1B,EADC;AAERC,QAAO,EAAEH,MAAMZ,MAAMgB,MAAd,EAAsBC,SAAS,4BAA/B,EAA6DC,SAAS,OAAtE,EAA+EC,OAAO,IAAtF,EAFC;AAGRC,SAAQ,EAAER,MAAMZ,MAAMqB,YAAd,EAA4BC,KAAK,MAAjC,EAAyCH,OAAO,IAAhD,EAHA;AAIRI,gBAAe,EAAEX,MAAMZ,MAAMwB,IAAd,EAAoBL,OAAO,IAA3B,EAAiCM,WAAW,EAAEV,OAAO,WAAT,EAA5C,EAJP;AAKRW,QAAO,EAAEd,MAAMZ,MAAM2B,eAAd,EALC;AAMRC,UAAS;AACRC,SAAO,EAAEjB,MAAMZ,MAAM8B,IAAd,EAAoBC,SAAS,IAA7B,EAAmCC,QAAQ,GAA3C,EADC;AAERC,YAAU,EAAErB,MAAMZ,MAAM8B,IAAd,EAAoBC,SAAS,IAA7B,EAAmCC,QAAQ,GAA3C;AAFF,EAND;AAURE,aAAY,EAAEtB,MAAMZ,MAAMqB,YAAd,EAA4BC,KAAK,cAAjC,EAAiDa,MAAM,IAAvD;AAVJ,CAAT;;AAaAjC,KAAKkC,MAAL,CAAYC,OAAZ,CAAoB,cAApB,EAAoCC,GAApC,CAAwC,YAAY;AACnD,QAAO,KAAKV,OAAL,CAAaK,QAAb,IAAyB,KAAKL,OAAL,CAAaC,KAA7C;AACA,CAFD;;AAIA3B,KAAKqC,cAAL,GAAsB,iDAAtB;AACArC,KAAKsC,QAAL","file":"Post.js","sourcesContent":["var keystone = require('keystone');\nvar Types = keystone.Field.Types;\n\n/**\n * Post Model\n * ==========\n */\n\nvar Post = new keystone.List('Post', {\n\tmap: { name: 'title' },\n\tautokey: { path: 'slug', from: 'title', unique: true },\n});\n\nPost.add({\n\ttitle: { type: String, required: true },\n\tstate: { type: Types.Select, options: 'draft, published, archived', default: 'draft', index: true },\n\tauthor: { type: Types.Relationship, ref: 'User', index: true },\n\tpublishedDate: { type: Types.Date, index: true, dependsOn: { state: 'published' } },\n\timage: { type: Types.CloudinaryImage },\n\tcontent: {\n\t\tbrief: { type: Types.Html, wysiwyg: true, height: 150 },\n\t\textended: { type: Types.Html, wysiwyg: true, height: 400 },\n\t},\n\tcategories: { type: Types.Relationship, ref: 'PostCategory', many: true },\n});\n\nPost.schema.virtual('content.full').get(function () {\n\treturn this.content.extended || this.content.brief;\n});\n\nPost.defaultColumns = 'title, state|20%, author|20%, publishedDate|20%';\nPost.register();\n"]}